<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href = "{{ url_for('static', filename='style.css') }}" />
    {% if title %}
        <title>Discovers Company - {{ title }}</title>
    {% else %}
        <title>Discovers Company</title>
    {% endif %}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
</head>
<body>
    <video autoplay muted loop playsinline id="bg-video" preload="auto">
        <source src="{{ url_for('static', filename='videos/background.mp4', v='2') }}" type="video/mp4">
        Your browser does not support the video tag.
    </video>

    <header class="masthead">
        <a id="logo1" href="{{ url_for('index') }}">
            <img src="{{ url_for('static', filename='images/logo1.png') }}" alt="Logo" class="logo-img">
        </a>

        <ul class="nav justify-content-end bg-primary" data-bs-theme="dark" id="menu">
            {# Show Logout only when logged in #}
            {% if session.get('id') %}
                <li class="nav-item">
                    <a class="nav-link" href="{{ url_for('logout') }}">Logout</a>
                </li>
                {% if request.endpoint != 'home' %}
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('home') }}">Home</a>
                    </li>
                {% endif %}
            {% endif %}

            {# Show Login/Register only when NOT logged in and not already on those pages #}
            {% if not session.get('id') %}
                {% if request.endpoint != 'login' %}
                    <li class="nav-item"><a class="nav-link" href="{{ url_for('login') }}">Login</a></li>
                {% endif %}
                {% if request.endpoint != 'register' %}
                    <li class="nav-item"><a class="nav-link" href="{{ url_for('register') }}">Register</a></li>
                {% endif %}
            {% endif %}

            {# "Main" if not already on index #}
            {% if request.endpoint != 'index' %}
                <li class="nav-item"><a class="nav-link" href="{{ url_for('index') }}">Main</a></li>
            {% endif %}

            {# Other always-visible items (avoid duplicating current page) #}
            {% if request.endpoint != 'developer' %}
                <li class="nav-item"><a class="nav-link" href="{{ url_for('developer') }}">Developer</a></li>
            {% endif %}
            {% if request.endpoint != 'about' %}
                <li class="nav-item"><a class="nav-link" href="{{ url_for('about') }}">About</a></li>
            {% endif %}

            {# Show Reserve ONLY if logged in, and hide it on its own page #}
            {% if session.get('id') and request.endpoint != 'reserve' %}
            <li class="nav-item">
                <a class="nav-link" href="{{ url_for('reserve') }}">Reserve</a>
            </li>
            {% endif %}
        </ul>
    </header>




    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert" style="z-index: 99;">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {% endfor %}
        {% endif %}
    {% endwith %}


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.min.js" integrity="sha384-G/EV+4j2dNv+tEPo3++6LCgdCROaejBqfUeNjuKAiuXbjrxilcCdDz6ZAVfHWe1Y" crossorigin="anonymous"></script>

    {% block content %}{% endblock %}
</body>
</html>
